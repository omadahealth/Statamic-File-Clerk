!function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)}(),+function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.trigger(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.parent("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},b.prototype.activate=function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e).emulateTransitionEnd(150):e(),f.removeClass("in")};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(a.support.transition.end,function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b()})}(jQuery),$(function(){var a={init:function(){this.bindUIActions()},bindUIActions:function(){$("body").on("change",".file-upload",this.uploadFiles),$("body").on("click",".btn-remove",this.removeFileReference),$("body").on("click",".load_existing",this.loadExisting)},prepareUpload:function(a){var b=a.target.files,c=$(this).closest(".s3files").find(".btn-upload");c.removeClass("is-hidden"),console.log(b)},uploadFiles:function(){var b=$(this),c=b.val(),d=c.split("\\"),e=d[d.length-1],f=b.closest(".view-upload"),g=f.find(".postUrl").val(),h=f.find(".file-wrapper"),i=f.find(".progress-bar"),j=i.find("progress"),k=i.find(".prc"),l=b.closest(".s3files").find(".result .filename-display"),m=b.closest(".s3files").find(".result input.successful-upload"),n=b.closest(".s3files").find(".result"),o=b.closest(".s3files").find(".s3-add-file");if(""!==e){var p=new FormData;$.each(b[0].files,function(a,b){p.append("file-"+a,b)}),$.ajax({url:g,type:"POST",data:p,cache:!1,dataType:"JSON",xhr:function(){var a=$.ajaxSettings.xhr();return a.upload&&(console.log("Xhr"),a.upload.addEventListener("progress",function(a){if(a.lengthComputable){var b=parseInt(a.loaded/a.total*100,10);console.log(b+"%"),j.attr({value:a.loaded,max:a.total}),k.html(b+"%")}},!1)),a},processData:!1,contentType:!1,beforeSend:function(){h.addClass("is-hidden"),i.removeClass("is-hidden")},success:function(a){"undefined"==typeof a.error?(console.log(a.success),console.log("URL: "+a.fullpath),i.addClass("is-hidden"),l.append(a.filename),m.val(a.fullpath),o.toggleClass("is-visible is-hidden"),setTimeout(function(){n.toggleClass("is-hidden is-visible")},300)):100===a.code||200===a.code||300===a.code||console.log("ERRORS: "+a.error)},error:function(a,b){console.log("ERRORS: "+b)}}),a.resetFormElement(b),console.log("Uploading... "+e)}},resetFormElement:function(a){a.wrap("<form>").parent("form").trigger("reset"),a.unwrap()},removeFileReference:function(a){var b=$(this),c=b.closest(".s3files").find(".result"),d=b.closest(".s3files").find(".s3-add-file"),e=b.closest(".s3files").find(".result input.successful-upload"),f=b.closest(".s3files").find(".result .filename-display");a.preventDefault(),e.val(""),f.html(""),c.toggleClass("is-visible is-hidden"),setTimeout(function(){d.toggleClass("is-hidden is-visible")},300)},loadExisting:function(){var a=$(this),b=a.data("list"),c=a.closest(".s3-add-file").find(".view-remote .view-list tbody");$.ajax({url:b,type:"GET",cache:!1,dataType:"json",processData:!1,contentType:!1,beforeSend:function(){},success:function(a){a.error===!1&&(console.log(a.success),c.html(a.html))},error:function(a,b){console.log("ERRORS: "+b)}})}};a.init()});